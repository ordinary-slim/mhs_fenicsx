isSteady: False
substrate : [4.25E-03, 2.05E-03, 1.755E-03]
part : [2.0E-03, 0.425E-03, 0.0]
els_per_radius : 4.0
radius : &radius 0.0425E-03
half_radius : &half_radius 0.02125E-03
num_boundary_layers : [12, 4, 12]
coarsest_el_factor : 16.0
coarsening_factor : 1.5
source_terms :
  - type : penetrating_gaussian
    initial_position : &p0 [-5.0, 0.0, 0.0]
    initial_speed : &speed [0.8, 0.0, 0]
    radius : *radius
    power : &power 179.2
    path: &path "Path.gcode"
    depth : &depth 0.0131866569E-03
  - type : lumped
    initial_position : *p0
    initial_speed : *speed
    radius : *radius
    power : *power
    mdwidth  : *radius
    mdheight : *half_radius
    mddepth : *half_radius
    path : *path
  - type : penetrating_gaussian
    initial_position : *p0
    initial_speed : *speed
    radius : *radius
    power : 0.0
    path: *path
    depth : *depth
# PROPS
environment_temperature : &environment_temperature 25
material_in625 : {
  phase_change : {
    latent_heat : &latent_heat 280.0E+03,
    solidus_temperature : &solidus_temperature 1290.0,
    liquidus_temperature : &liquidus_temperature 1350.0,
  },
  absorptivity : [[*environment_temperature, 0.3], [2000.0, 0.4]],
  density : 8.44E+03, # kg / mm3
  conductivity : [[0.0, 9.5], [1320.0, 28.85], [2000.0, 28.85]],
  specific_heat : [[0.0, 405.0], [1320.0, 723.63], [2000.0, 723.63]],
}
convection_coeff : 0.0
radiation_coeff: 0.0
smoothing_cte_phase_change : 0.25285274
# END_ESSENTIAL
petsc_opts_micro: {
  "ksp_error_if_not_converged" : "true",
  "ksp_type" : "gmres",
  "ksp_atol" : 1e-10,
  "ksp_rtol" : 1e-10,
  "pc_type" : "hypre",
  "snes_linesearch_type" : "basic",
  "snes_rtol" : 1e-8,
  "snes_atol" : 1e-8,
}
petsc_opts_macro: {
  "ksp_error_if_not_converged" : "true",
  "ksp_type" : "gmres",
  "ksp_atol" : 1e-10,
  "ksp_rtol" : 1e-10,
  "pc_type" : "hypre",
  "snes_linesearch_type" : "basic",
  "snes_rtol" : 1e-8,
  "snes_atol" : 1e-8,
}
petsc_opts_moving: {
  "ksp_error_if_not_converged" : "true",
  "ksp_type" : "gmres",
  "ksp_atol" : 1e-09,
  "ksp_rtol" : 1e-09,
  "pc_type" : "hypre",
  #"snes_linesearch_type" : "basic",
  "snes_rtol" : 1e-8,
  "snes_atol" : 1e-8,
}
petsc_opts_mono_robin: {
  #"snes_max_it" : 30,
  "snes_atol" : 1e-05,
  "snes_rtol" : 1e-05,
    #"snes_linesearch_max_it" : 30,
  "ksp_error_if_not_converged" : "true",
  "ksp_type" : "gmres",
  "ksp_atol" : 1e-13,
  "ksp_rtol" : 1e-13,
  "pc_type" : "fieldsplit",
  "snes_rtol" : 1e-8,
  "snes_atol" : 1e-8,
}
petsc_opts_macro_chimera: {
  "snes_max_it" : 30,
  "snes_atol" : 1e-06,
  "snes_rtol" : 1e-06,
    #"snes_linesearch_max_it" : 30,
  "ksp_error_if_not_converged" : "true",
  "ksp_type" : "gmres",
  "ksp_atol" : 1e-13,
  "ksp_rtol" : 1e-13,
  "pc_type" : "fieldsplit",
  "snes_rtol" : 1e-8,
  "snes_atol" : 1e-8,
}

max_timesteps: 8
dt : 1.0 #placeholder

quadrature_metadata: {
  #quadrature_rule : "vertex",
  quadrature_degree : 4,
}
supg: 1
scale_stabilization: 1.0

max_nr_iters: 30
max_ls_iters: 5

substepping_parameters: {
  chimera_steadiness_workflow: {
    enabled: False,
    adim_dt_increment: 0.5,
    max_adim_dt: &max_adim_dt 2.0,
    threshold : 0.05,
  },
  micro_adim_dt: *max_adim_dt,
  macro_adim_dt: 6.0,
  cooling_adim_dt: 1,
  max_staggered_iters: 1,
  adim_lens: {
    back_pad : 12,
    front_pad : 4.5,
    side_pad : 5,
    top_pad : 0.5,
    bot_pad : 4.5,
  },
  predictor: {
    enabled :  True,
    source_term : 2,
  },
  writepos: False,
  mono_robin_gamma_quadrature_degree : 4,
  chimera_always_on: True,
  chimera_driver: {
    type: "staggered",
    gamma_coeff1 : 1.0,
    gamma_coeff2 : 1.0,
  },
}

moving_domain_params : {
  shape : True,
  els_per_radius : 4.0,
  max_adim_dt : *max_adim_dt,
  adim_front_len : 3.5,
  adim_side_len : 4,
  adim_bot_len : 3.5,
  adim_top_len : 0.0,
}

gamma_quadrature: {
  degree: 4,
}

run_type : "chimera"
calibration_type : "absorptivities"
carry_on_non_convergence: true
